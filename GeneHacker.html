<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GeneHackers - Edit Life's Code</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Rajdhani', monospace;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a0d2e 25%, #16213e 50%, #0f3460 75%, #0a1428 100%);
            color: #00ff88;
            overflow-x: hidden;
            min-height: 100vh;
        }
        
        /* DNA Particle Background */
        .dna-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .dna-particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: linear-gradient(45deg, #8a2be2, #00ffff);
            border-radius: 50%;
            animation: float 8s infinite ease-in-out;
        }
        
        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); opacity: 0.3; }
            25% { transform: translate(50px, -30px) scale(1.2); opacity: 0.8; }
            50% { transform: translate(-30px, -60px) scale(0.8); opacity: 0.5; }
            75% { transform: translate(-50px, -30px) scale(1.1); opacity: 0.9; }
        }
        
        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            background: rgba(0, 0, 0, 0.9);
            backdrop-filter: blur(20px);
            border-bottom: 2px solid #8a2be2;
            padding: 20px 40px;
        }
        
        .nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1400px;
            margin: 0 auto;
        }
        
        .logo {
            font-family: 'Orbitron', monospace;
            font-size: 2.5rem;
            font-weight: 900;
            background: linear-gradient(45deg, #8a2be2, #00ffff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(138, 43, 226, 0.5);
            animation: pulse-glow 2s infinite alternate;
        }
        
        @keyframes pulse-glow {
            0% { filter: brightness(1) drop-shadow(0 0 10px rgba(138, 43, 226, 0.5)); }
            100% { filter: brightness(1.2) drop-shadow(0 0 20px rgba(138, 43, 226, 0.8)); }
        }
        
        .nav-menu {
            display: flex;
            gap: 30px;
        }
        
        .nav-item {
            color: #00ffff;
            text-decoration: none;
            font-weight: 600;
            font-size: 1.1rem;
            transition: all 0.3s ease;
            position: relative;
            padding: 10px 15px;
        }
        
        .nav-item:hover {
            color: #8a2be2;
            text-shadow: 0 0 10px currentColor;
            transform: translateY(-2px);
        }
        
        .nav-item::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0;
            height: 2px;
            background: linear-gradient(90deg, #8a2be2, #00ffff);
            transition: width 0.3s ease;
        }
        
        .nav-item:hover::after {
            width: 100%;
        }
        
        /* Main Content */
        .main-content {
            margin-top: 100px;
            padding: 40px;
        }
        
        .hero-section {
            text-align: center;
            padding: 60px 20px;
            position: relative;
        }
        
        .hero-title {
            font-family: 'Orbitron', monospace;
            font-size: 4rem;
            font-weight: 900;
            margin-bottom: 20px;
            background: linear-gradient(45deg, #8a2be2, #00ffff, #00ff88, #ff0080);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: rainbow-shift 3s infinite;
        }
        
        @keyframes rainbow-shift {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }
        
        .hero-subtitle {
            font-size: 1.5rem;
            color: #00ffff;
            margin-bottom: 40px;
            opacity: 0.9;
        }
        
        /* DNA Helix Animation */
        .dna-helix {
            position: relative;
            width: 200px;
            height: 400px;
            margin: 40px auto;
        }
        
        .helix-strand {
            position: absolute;
            width: 4px;
            height: 100%;
            background: linear-gradient(to bottom, #8a2be2, #00ffff);
            left: 50%;
            transform-origin: center;
            animation: rotate-helix 4s infinite linear;
        }
        
        .helix-strand:nth-child(2) {
            animation-delay: -2s;
        }
        
        @keyframes rotate-helix {
            0% { transform: translateX(-50%) rotateY(0deg); }
            100% { transform: translateX(-50%) rotateY(360deg); }
        }
        
        .base-pair {
            position: absolute;
            width: 80px;
            height: 3px;
            background: linear-gradient(90deg, #ff0080, #00ff88);
            left: 50%;
            transform: translateX(-50%);
            animation: base-glow 2s infinite alternate;
        }
        
        @keyframes base-glow {
            0% { box-shadow: 0 0 5px currentColor; }
            100% { box-shadow: 0 0 15px currentColor; }
        }
        
        /* Sections Grid */
        .sections-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            max-width: 1400px;
            margin: 60px auto;
        }
        
        .section-card {
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.1), rgba(0, 255, 255, 0.1));
            border: 2px solid transparent;
            border-radius: 20px;
            padding: 30px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .section-card::before {
            content: '';
            position: absolute;
            top: -2px;
            left: -2px;
            right: -2px;
            bottom: -2px;
            background: linear-gradient(45deg, #8a2be2, #00ffff, #00ff88, #ff0080);
            z-index: -1;
            border-radius: 20px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .section-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(138, 43, 226, 0.3);
        }
        
        .section-card:hover::before {
            opacity: 1;
        }
        
        .section-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: #00ffff;
            filter: drop-shadow(0 0 10px currentColor);
        }
        
        .section-title {
            font-family: 'Orbitron', monospace;
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 15px;
            color: #8a2be2;
        }
        
        .section-description {
            color: #00ff88;
            font-size: 1.1rem;
            line-height: 1.6;
            margin-bottom: 20px;
        }
        
        .section-button {
            background: linear-gradient(45deg, #8a2be2, #00ffff);
            border: none;
            color: #000;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Rajdhani', monospace;
            font-size: 1rem;
        }
        
        .section-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.4);
        }
        
        /* Interactive Gene Builder */
        .gene-builder {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 20px;
            padding: 30px;
            margin: 40px auto;
            max-width: 1200px;
            border: 2px solid #8a2be2;
        }
        
        .crispr-interface {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 20px 0;
        }
        
        .sequence-editor {
            background: rgba(138, 43, 226, 0.1);
            border-radius: 15px;
            padding: 20px;
        }
        
        .gene-sequence {
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            background: rgba(0, 0, 0, 0.6);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            letter-spacing: 1px;
            color: #00ffff;
            line-height: 1.8;
            border: 1px solid #8a2be2;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .codon {
            padding: 2px 4px;
            margin: 1px;
            border-radius: 3px;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-block;
            position: relative;
        }
        
        .codon:hover {
            background: #8a2be2;
            color: #000;
            transform: scale(1.1);
        }
        
        .codon.selected {
            background: #ff0080;
            color: #fff;
            box-shadow: 0 0 10px #ff0080;
        }
        
        .codon.cut-site {
            background: #ff4444;
            animation: cut-pulse 1s infinite;
        }
        
        @keyframes cut-pulse {
            0%, 100% { box-shadow: 0 0 5px #ff4444; }
            50% { box-shadow: 0 0 15px #ff4444; }
        }
        
        .codon.secret {
            background: linear-gradient(45deg, #ff0080, #00ff88);
            animation: secret-pulse 1s infinite;
        }
        
        @keyframes secret-pulse {
            0%, 100% { box-shadow: 0 0 5px currentColor; }
            50% { box-shadow: 0 0 15px currentColor; }
        }
        
        .protein-visualizer {
            background: rgba(0, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            position: relative;
            min-height: 300px;
        }
        
        .protein-3d {
            width: 100%;
            height: 250px;
            background: radial-gradient(circle, rgba(0, 255, 255, 0.1), rgba(138, 43, 226, 0.1));
            border-radius: 10px;
            position: relative;
            overflow: hidden;
        }
        
        .amino-acid {
            position: absolute;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            transition: all 0.5s ease;
        }
        
        .amino-acid.hydrophobic { background: #ff6b6b; }
        .amino-acid.hydrophilic { background: #4ecdc4; }
        .amino-acid.charged { background: #ffe66d; }
        .amino-acid.polar { background: #a8e6cf; }
        
        .bond {
            position: absolute;
            height: 2px;
            background: #8a2be2;
            transform-origin: left center;
            opacity: 0.7;
        }
        
        .crispr-tools {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .tool-button {
            background: linear-gradient(45deg, #8a2be2, #00ffff);
            border: none;
            color: #000;
            padding: 15px 20px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Rajdhani', monospace;
            font-size: 1rem;
            position: relative;
            overflow: hidden;
        }
        
        .tool-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(138, 43, 226, 0.3);
        }
        
        .tool-button.active {
            background: linear-gradient(45deg, #ff0080, #00ff88);
            animation: tool-active 1s infinite;
        }
        
        @keyframes tool-active {
            0%, 100% { box-shadow: 0 0 10px currentColor; }
            50% { box-shadow: 0 0 20px currentColor; }
        }
        
        .editing-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-item {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #8a2be2;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: #00ff88;
            font-family: 'Orbitron', monospace;
        }
        
        .stat-label {
            color: #00ffff;
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .guide-rna-designer {
            background: rgba(255, 0, 128, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .guide-rna-input {
            width: 100%;
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #ff0080;
            border-radius: 8px;
            padding: 12px;
            color: #00ffff;
            font-family: 'Courier New', monospace;
            font-size: 1rem;
            letter-spacing: 1px;
        }
        
        .guide-rna-input:focus {
            outline: none;
            border-color: #8a2be2;
            box-shadow: 0 0 10px rgba(138, 43, 226, 0.3);
        }
        
        .mutation-simulator {
            background: rgba(0, 255, 136, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .organism-preview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .organism-card {
            background: rgba(0, 0, 0, 0.6);
            border: 1px solid #00ff88;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .organism-card:hover {
            transform: scale(1.05);
            border-color: #8a2be2;
            box-shadow: 0 5px 15px rgba(138, 43, 226, 0.3);
        }
        
        .organism-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .organism-name {
            color: #00ffff;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .organism-trait {
            color: #00ff88;
            font-size: 0.8rem;
        }
        
        .phylogenetic-tree {
            background: rgba(0, 0, 0, 0.6);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            min-height: 200px;
            position: relative;
        }
        
        .tree-node {
            position: absolute;
            width: 12px;
            height: 12px;
            background: #00ffff;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .tree-node:hover {
            background: #8a2be2;
            transform: scale(1.5);
        }
        
        .tree-branch {
            position: absolute;
            height: 2px;
            background: #00ff88;
            opacity: 0.7;
        }
        
        /* AI NPC Guide */
        .ai-guide {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, #8a2be2, #00ffff);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            animation: guide-float 3s infinite ease-in-out;
            z-index: 1000;
            box-shadow: 0 0 20px rgba(138, 43, 226, 0.5);
        }
        
        @keyframes guide-float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
        
        .ai-guide:hover {
            transform: scale(1.1);
        }
        
        .guide-icon {
            font-size: 2rem;
            color: #000;
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 2000;
            backdrop-filter: blur(10px);
        }
        
        .modal-content {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(135deg, rgba(138, 43, 226, 0.2), rgba(0, 255, 255, 0.2));
            border: 2px solid #8a2be2;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            width: 90%;
            color: #00ffff;
        }
        
        .close-modal {
            position: absolute;
            top: 15px;
            right: 20px;
            font-size: 2rem;
            color: #ff0080;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .close-modal:hover {
            color: #fff;
        }
        
        /* Leaderboard */
        .leaderboard {
            background: rgba(0, 0, 0, 0.8);
            border-radius: 20px;
            padding: 30px;
            margin: 40px auto;
            max-width: 600px;
            border: 2px solid #00ffff;
        }
        
        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 20px;
            margin: 10px 0;
            background: linear-gradient(90deg, rgba(138, 43, 226, 0.1), rgba(0, 255, 255, 0.1));
            border-radius: 10px;
            transition: all 0.3s ease;
        }
        
        .leaderboard-item:hover {
            transform: translateX(10px);
            background: linear-gradient(90deg, rgba(138, 43, 226, 0.2), rgba(0, 255, 255, 0.2));
        }
        
        .rank {
            font-weight: 700;
            color: #8a2be2;
            font-size: 1.2rem;
        }
        
        .username {
            color: #00ffff;
            font-weight: 600;
        }
        
        .score {
            color: #00ff88;
            font-weight: 700;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .sections-grid {
                grid-template-columns: 1fr;
            }
            
            .nav-menu {
                display: none;
            }
            
            .logo {
                font-size: 2rem;
            }
        }
        
        /* Sound effects indicator */
        .sound-indicator {
            position: fixed;
            top: 50%;
            left: 20px;
            transform: translateY(-50%);
            color: #8a2be2;
            font-size: 1.5rem;
            z-index: 1000;
            animation: sound-wave 1s infinite;
        }
        
        @keyframes sound-wave {
            0%, 100% { opacity: 0.3; transform: translateY(-50%) scale(1); }
            50% { opacity: 1; transform: translateY(-50%) scale(1.2); }
        }

        @keyframes fade-out {
            0% { opacity: 1; transform: scale(1); }
            100% { opacity: 0; transform: scale(0); }
        }
    </style>
</head>
<body>
    <!-- DNA Particle Background -->
    <div class="dna-background" id="dnaBackground"></div>
    
    <!-- Sound Indicator -->
    <div class="sound-indicator" id="soundIndicator">🎵</div>
    
    <!-- Header -->
    <header class="header">
        <div class="nav-container">
            <div class="logo">GeneHackers</div>
            <nav class="nav-menu">
                <a href="#mutate" class="nav-item">Mutate Your Mind</a>
                <a href="#build" class="nav-item">Build-A-Gene</a>
                <a href="#vault" class="nav-item">Alpha Vault</a>
                <a href="#protocols" class="nav-item">Rebel Protocols</a>
            </nav>
        </div>
    </header>
    
    <!-- Main Content -->
    <main class="main-content">
        <!-- Hero Section -->
        <section class="hero-section">
            <h1 class="hero-title">EDIT LIFE'S CODE</h1>
            <p class="hero-subtitle">Where Nature Meets AI Revolution</p>
            
            <!-- DNA Helix Animation -->
            <div class="dna-helix">
                <div class="helix-strand"></div>
                <div class="helix-strand"></div>
                <div class="base-pair" style="top: 10%;"></div>
                <div class="base-pair" style="top: 30%;"></div>
                <div class="base-pair" style="top: 50%;"></div>
                <div class="base-pair" style="top: 70%;"></div>
                <div class="base-pair" style="top: 90%;"></div>
            </div>
        </section>
        
        <!-- Main Sections -->
        <div class="sections-grid">
            <div class="section-card" onclick="openSection('mutate')">
                <div class="section-icon">🧠</div>
                <h2 class="section-title">Mutate Your Mind</h2>
                <p class="section-description">Dive into the cognitive enhancement protocols. Rewire neural pathways through genetic expression modifications.</p>
                <button class="section-button">Enter Neural Lab</button>
            </div>
            
            <div class="section-card" onclick="openSection('build')">
                <div class="section-icon">🧬</div>
                <h2 class="section-title">Build-A-Gene</h2>
                <p class="section-description">Interactive CRISPR simulator. Design custom organisms, splice traits, and witness evolution in real-time.</p>
                <button class="section-button">Start Building</button>
            </div>
            
            <div class="section-card" onclick="openSection('vault')">
                <div class="section-icon">🔬</div>
                <h2 class="section-title">Alpha Vault of Species</h2>
                <p class="section-description">Classified genetic blueprints from around the universe. Upload your discoveries and unlock alien DNA patterns.</p>
                <button class="section-button">Access Vault</button>
            </div>
            
            <div class="section-card" onclick="openSection('protocols')">
                <div class="section-icon">⚡</div>
                <h2 class="section-title">Rebel Protocols</h2>
                <p class="section-description">Underground gene-hacking techniques. Join the resistance against biological limitations.</p>
                <button class="section-button">Join Rebellion</button>
            </div>
        </div>
        
        <!-- Interactive Gene Builder -->
        <div class="gene-builder">
            <h3 style="color: #8a2be2; font-family: 'Orbitron', monospace; text-align: center; margin-bottom: 20px;">
                🧬 Advanced CRISPR Laboratory 🧬
            </h3>
            
            <!-- CRISPR Tools Interface -->
            <div class="crispr-tools">
                <button class="tool-button" id="cas9Tool" onclick="selectTool('cas9')">Cas9 Nuclease</button>
                <button class="tool-button" id="baseTool" onclick="selectTool('base')">Base Editor</button>
                <button class="tool-button" id="primeTool" onclick="selectTool('prime')">Prime Editor</button>
                <button class="tool-button" id="cutTool" onclick="selectTool('cut')">Cut & Insert</button>
                <button class="tool-button" id="analyzeTool" onclick="selectTool('analyze')">Analyze</button>
                <button class="tool-button" id="simulateTool" onclick="selectTool('simulate')">Simulate</button>
            </div>
            
            <!-- Main Interface -->
            <div class="crispr-interface">
                <!-- Sequence Editor -->
                <div class="sequence-editor">
                    <h4 style="color: #00ffff; margin-bottom: 15px;">🧬 Target Sequence</h4>
                    <div class="gene-sequence" id="targetSequence">
                        <span class="codon" onclick="selectCodon(this)" data-position="8">AAG</span>
                        <span class="codon" onclick="selectCodon(this)" data-position="9">TAC</span>
                        <span class="codon" onclick="selectCodon(this)" data-position="10">GTA</span>
                        <span class="codon" onclick="selectCodon(this)" data-position="11">ACG</span>
                        <span class="codon" onclick="selectCodon(this)" data-position="12">CTT</span>
                        <span class="codon" onclick="selectCodon(this)" data-position="13">GAA</span>
                        <span class="codon" onclick="selectCodon(this)" data-position="14">TGA</span>
                    </div>
                    
                    <!-- Guide RNA Designer -->
                    <div class="guide-rna-designer">
                        <h5 style="color: #ff0080; margin-bottom: 10px;">Guide RNA Sequence</h5>
                        <input type="text" class="guide-rna-input" id="guideRNA" placeholder="Enter 20-nucleotide guide RNA..." maxlength="20">
                        <button class="tool-button" style="margin-top: 10px; width: 100%;" onclick="designGuideRNA()">Auto-Design gRNA</button>
                    </div>
                </div>
                
                <!-- Protein Visualizer -->
                <div class="protein-visualizer">
                    <h4 style="color: #00ffff; margin-bottom: 15px;">🧪 Protein Structure</h4>
                    <div class="protein-3d" id="proteinView">
                        <!-- Amino acids will be rendered here -->
                    </div>
                    <div style="margin-top: 15px; color: #00ff88; font-size: 0.9rem;">
                        <div id="proteinInfo">Click codons to see amino acid changes</div>
                    </div>
                </div>
            </div>
            
            <!-- Editing Statistics -->
            <div class="editing-stats">
                <div class="stat-item">
                    <div class="stat-value" id="cutEfficiency">0%</div>
                    <div class="stat-label">Cut Efficiency</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="offTargets">0</div>
                    <div class="stat-label">Off-Targets</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="mutations">0</div>
                    <div class="stat-label">Mutations</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="stability">100%</div>
                    <div class="stat-label">Stability</div>
                </div>
            </div>
            
            <!-- Mutation Simulator -->
            <div class="mutation-simulator">
                <h4 style="color: #00ff88; margin-bottom: 15px;">🔬 Organism Designer</h4>
                <div class="organism-preview">
                    <div class="organism-card" onclick="selectOrganism('bacteria')">
                        <div class="organism-icon">🦠</div>
                        <div class="organism-name">E. coli</div>
                        <div class="organism-trait">Fast reproduction</div>
                    </div>
                    <div class="organism-card" onclick="selectOrganism('plant')">
                        <div class="organism-icon">🌱</div>
                        <div class="organism-name">Arabidopsis</div>
                        <div class="organism-trait">Model organism</div>
                    </div>
                    <div class="organism-card" onclick="selectOrganism('mouse')">
                        <div class="organism-icon">🐭</div>
                        <div class="organism-name">Mouse</div>
                        <div class="organism-trait">Mammalian model</div>
                    </div>
                    <div class="organism-card" onclick="selectOrganism('human')">
                        <div class="organism-icon">👤</div>
                        <div class="organism-name">Human Cell</div>
                        <div class="organism-trait">Therapeutic target</div>
                    </div>
                </div>
                
                <div style="text-align: center; margin: 20px 0;">
                    <button class="tool-button" onclick="runSimulation()" style="font-size: 1.2rem; padding: 15px 30px;">
                        🚀 Run Gene Edit Simulation
                    </button>
                </div>
            </div>
            
            <!-- Phylogenetic Tree -->
            <div class="phylogenetic-tree" id="phyloTree">
                <h4 style="color: #00ffff; margin-bottom: 15px; text-align: center;">🌳 Evolutionary Tree</h4>
                <!-- Tree will be generated dynamically -->
            </div>
        </div>
        
        <!-- Leaderboard -->
        <div class="leaderboard">
            <h3 style="color: #8a2be2; font-family: 'Orbitron', monospace; text-align: center; margin-bottom: 20px;">
                🏆 Gene Hacker Leaderboard 🏆
            </h3>
            <div class="leaderboard-item">
                <span class="rank">#1</span>
                <span class="username">HelixReaper</span>
                <span class="score">99,847 edits</span>
            </div>
            <div class="leaderboard-item">
                <span class="rank">#2</span>
                <span class="username">DNARevolutionary</span>
                <span class="score">87,263 edits</span>
            </div>
            <div class="leaderboard-item">
                <span class="rank">#3</span>
                <span class="username">CRISPRNinja</span>
                <span class="score">75,891 edits</span>
            </div>
            <div class="leaderboard-item">
                <span class="rank">#4</span>
                <span class="username">BioHacker404</span>
                <span class="score">62,445 edits</span>
            </div>
            <div class="leaderboard-item">
                <span class="rank">#5</span>
                <span class="username">You</span>
                <span class="score">0 edits</span>
            </div>
        </div>
    </main>
    
    <!-- AI Guide -->
    <div class="ai-guide" onclick="openGuide()">
        <div class="guide-icon">🤖</div>
    </div>
    
    <!-- Modals -->
    <div class="modal" id="guideModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('guideModal')">&times;</span>
            <h2 style="color: #8a2be2; font-family: 'Orbitron', monospace;">AI Lab Assistant - HELIX</h2>
            <p style="margin: 20px 0;">Welcome to GeneHackers, young innovator! I'm HELIX, your digital lab mentor.</p>
            <p style="margin: 20px 0;">Here's what you can do:</p>
            <ul style="color: #00ff88; margin: 20px 0; padding-left: 20px;">
                <li>Click on DNA codons to mutate sequences</li>
                <li>Find secret codons (they glow!) to unlock hidden protocols</li>
                <li>Explore each section to discover new gene-editing tools</li>
                <li>Upload your ideas to the Alpha Vault</li>
                <li>Compete on the leaderboard with fellow gene hackers</li>
            </ul>
            <p style="margin: 20px 0; color: #ff0080;">Remember: With great genetic power comes great responsibility. Edit wisely!</p>
        </div>
    </div>
    
    <div class="modal" id="sectionModal">
        <div class="modal-content">
            <span class="close-modal" onclick="closeModal('sectionModal')">&times;</span>
            <div id="sectionContent"></div>
        </div>
    </div>
    
    <script>
        // Enhanced Gene Editing Simulation Functions
        let currentTool = 'cas9';
        let selectedCodon = null;
        let mutationCount = 0;
        let currentOrganism = 'bacteria';
        let cutSites = [];
        
        // Genetic Code Dictionary
        const geneticCode = {
            'TTT': 'Phe', 'TTC': 'Phe', 'TTA': 'Leu', 'TTG': 'Leu',
            'TCT': 'Ser', 'TCC': 'Ser', 'TCA': 'Ser', 'TCG': 'Ser',
            'TAT': 'Tyr', 'TAC': 'Tyr', 'TAA': 'STOP', 'TAG': 'STOP',
            'TGT': 'Cys', 'TGC': 'Cys', 'TGA': 'STOP', 'TGG': 'Trp',
            'CTT': 'Leu', 'CTC': 'Leu', 'CTA': 'Leu', 'CTG': 'Leu',
            'CCT': 'Pro', 'CCC': 'Pro', 'CCA': 'Pro', 'CCG': 'Pro',
            'CAT': 'His', 'CAC': 'His', 'CAA': 'Gln', 'CAG': 'Gln',
            'CGT': 'Arg', 'CGC': 'Arg', 'CGA': 'Arg', 'CGG': 'Arg',
            'ATT': 'Ile', 'ATC': 'Ile', 'ATA': 'Ile', 'ATG': 'Met',
            'ACT': 'Thr', 'ACC': 'Thr', 'ACA': 'Thr', 'ACG': 'Thr',
            'AAT': 'Asn', 'AAC': 'Asn', 'AAA': 'Lys', 'AAG': 'Lys',
            'AGT': 'Ser', 'AGC': 'Ser', 'AGA': 'Arg', 'AGG': 'Arg',
            'GTT': 'Val', 'GTC': 'Val', 'GTA': 'Val', 'GTG': 'Val',
            'GCT': 'Ala', 'GCC': 'Ala', 'GCA': 'Ala', 'GCG': 'Ala',
            'GAT': 'Asp', 'GAC': 'Asp', 'GAA': 'Glu', 'GAG': 'Glu',
            'GGT': 'Gly', 'GGC': 'Gly', 'GGA': 'Gly', 'GGG': 'Gly'
        };
        
        // Amino Acid Properties
        const aminoAcidProps = {
            'Phe': { color: '#ff6b6b', type: 'hydrophobic', charge: 0 },
            'Leu': { color: '#ff6b6b', type: 'hydrophobic', charge: 0 },
            'Ser': { color: '#a8e6cf', type: 'polar', charge: 0 },
            'Tyr': { color: '#a8e6cf', type: 'polar', charge: 0 },
            'Cys': { color: '#a8e6cf', type: 'polar', charge: 0 },
            'Trp': { color: '#ff6b6b', type: 'hydrophobic', charge: 0 },
            'Pro': { color: '#ff6b6b', type: 'hydrophobic', charge: 0 },
            'His': { color: '#ffe66d', type: 'charged', charge: 1 },
            'Gln': { color: '#a8e6cf', type: 'polar', charge: 0 },
            'Arg': { color: '#ffe66d', type: 'charged', charge: 1 },
            'Ile': { color: '#ff6b6b', type: 'hydrophobic', charge: 0 },
            'Met': { color: '#ff6b6b', type: 'hydrophobic', charge: 0 },
            'Thr': { color: '#a8e6cf', type: 'polar', charge: 0 },
            'Asn': { color: '#a8e6cf', type: 'polar', charge: 0 },
            'Lys': { color: '#ffe66d', type: 'charged', charge: 1 },
            'Val': { color: '#ff6b6b', type: 'hydrophobic', charge: 0 },
            'Ala': { color: '#ff6b6b', type: 'hydrophobic', charge: 0 },
            'Asp': { color: '#ffe66d', type: 'charged', charge: -1 },
            'Glu': { color: '#ffe66d', type: 'charged', charge: -1 },
            'Gly': { color: '#4ecdc4', type: 'hydrophilic', charge: 0 },
            'STOP': { color: '#ff4444', type: 'stop', charge: 0 }
        };
        
        // Tool Selection with null safety
        function selectTool(tool) {
            const toolButtons = document.querySelectorAll('.tool-button');
            if (toolButtons) {
                toolButtons.forEach(btn => {
                    if (btn) btn.classList.remove('active');
                });
            }
            
            const selectedTool = document.getElementById(tool + 'Tool');
            if (selectedTool) {
                selectedTool.classList.add('active');
            }
            
            currentTool = tool;
            updateToolDescription(tool);
            
            // Safe sound indicator call
            if (typeof animateSoundIndicator === 'function') {
                animateSoundIndicator();
            }
        }
        
        function updateToolDescription(tool) {
            const descriptions = {
                'cas9': 'Cas9 creates double-strand breaks at specific locations',
                'base': 'Base editing allows precise A→G or C→T conversions',
                'prime': 'Prime editing enables insertions, deletions, and replacements',
                'cut': 'Cut and insert allows adding new genetic material',
                'analyze': 'Analyze sequence for potential off-targets and efficiency',
                'simulate': 'Simulate the effects of your genetic modifications'
            };
            
            // Update info display (you could add an info panel)
            console.log(descriptions[tool] || 'Unknown tool selected');
        }
        
        // Codon Selection and Editing with comprehensive safety
        function selectCodon(element) {
            if (!element) return;
            
            // Clear previous selections safely
            const allCodons = document.querySelectorAll('.codon');
            if (allCodons) {
                allCodons.forEach(c => {
                    if (c) c.classList.remove('selected');
                });
            }
            
            selectedCodon = element;
            element.classList.add('selected');
            
            const position = element.dataset ? element.dataset.position : null;
            const sequence = element.textContent || '';
            
            switch(currentTool) {
                case 'cas9':
                    performCas9Cut(element);
                    break;
                case 'base':
                    performBaseEdit(element);
                    break;
                case 'prime':
                    performPrimeEdit(element);
                    break;
                case 'cut':
                    markCutSite(element);
                    break;
                case 'analyze':
                    analyzeSequence(element);
                    break;
            }
            
            updateProteinVisualization();
            updateStats();
        }
        
        function performCas9Cut(element) {
            element.classList.add('cut-site');
            cutSites.push(element);
            
            setTimeout(() => {
                const newSequences = ['---', 'DEL', 'INS'];
                element.textContent = newSequences[Math.floor(Math.random() * newSequences.length)];
                element.style.background = '#ff4444';
                mutationCount++;
            }, 1000);
        }
        
        function performBaseEdit(element) {
            const sequence = element.textContent;
            let newSequence = '';
            
            // Simulate base editing (C→T or A→G)
            for (let base of sequence) {
                if (base === 'C' && Math.random() < 0.8) {
                    newSequence += 'T';
                } else if (base === 'A' && Math.random() < 0.8) {
                    newSequence += 'G';
                } else {
                    newSequence += base;
                }
            }
            
            if (newSequence !== sequence) {
                element.textContent = newSequence;
                element.style.background = '#00ff88';
                mutationCount++;
                
                setTimeout(() => {
                    element.style.background = '';
                }, 2000);
            }
        }
        
        function performPrimeEdit(element) {
            const insertions = ['AAA', 'TTT', 'GGG', 'CCC'];
            const insertion = insertions[Math.floor(Math.random() * insertions.length)];
            
            // Simulate prime editing insertion
            element.textContent = element.textContent + insertion;
            element.style.background = '#8a2be2';
            element.style.color = '#fff';
            mutationCount++;
            
            setTimeout(() => {
                element.style.background = '';
                element.style.color = '';
            }, 2000);
        }
        
        function markCutSite(element) {
            element.classList.add('cut-site');
            cutSites.push(element);
        }
        
        function analyzeSequence(element) {
            const sequence = element.textContent;
            const efficiency = Math.floor(Math.random() * 40) + 60; // 60-100%
            const offTargets = Math.floor(Math.random() * 5);
            
            alert(`Analysis Results for ${sequence}:\n\nCut Efficiency: ${efficiency}%\nPredicted Off-targets: ${offTargets}\nRecommendation: ${efficiency > 80 ? 'Proceed' : 'Optimize guide RNA'}`);
        }
        
        // Guide RNA Designer
        function designGuideRNA() {
            if (!selectedCodon) {
                alert('Please select a target codon first!');
                return;
            }
            
            const targetSequence = selectedCodon.textContent;
            // Generate complementary guide RNA (simplified)
            const complementMap = {'A': 'T', 'T': 'A', 'G': 'C', 'C': 'G'};
            let guideRNA = '';
            
            for (let base of targetSequence) {
                guideRNA += complementMap[base] || base;
            }
            
            // Add PAM recognition sequence
            guideRNA += 'TTTTAGAGCTA';
            
            const guideRNAInput = document.getElementById('guideRNA');
            if (guideRNAInput) {
                guideRNAInput.value = guideRNA;
            }
            
            // Calculate efficiency
            const efficiency = Math.floor(Math.random() * 30) + 70;
            const efficiencyEl = document.getElementById('cutEfficiency');
            if (efficiencyEl) {
                efficiencyEl.textContent = efficiency + '%';
            }
            
            animateSoundIndicator();
        }
        
        // Protein Visualization
        function updateProteinVisualization() {
            const proteinView = document.getElementById('proteinView');
            const proteinInfo = document.getElementById('proteinInfo');
            
            if (!proteinView || !proteinInfo) return;
            
            const codonElements = document.querySelectorAll('#targetSequence .codon');
            if (!codonElements.length) return;
            
            const sequence = Array.from(codonElements).map(c => c.textContent);
            
            // Clear previous visualization
            proteinView.innerHTML = '';
            
            // Generate amino acid sequence
            let aminoAcids = [];
            for (let codon of sequence) {
                if (codon && codon.length === 3 && geneticCode[codon]) {
                    aminoAcids.push(geneticCode[codon]);
                }
            }
            
            if (aminoAcids.length === 0) {
                proteinInfo.innerHTML = 'No valid protein sequence detected';
                return;
            }
            
            // Create 3D-like protein visualization
            aminoAcids.forEach((aa, index) => {
                if (aa === 'STOP') return;
                
                const aminoDiv = document.createElement('div');
                aminoDiv.className = `amino-acid ${aminoAcidProps[aa]?.type || 'hydrophobic'}`;
                aminoDiv.style.backgroundColor = aminoAcidProps[aa]?.color || '#888';
                
                // Position in 3D-like spiral
                const angle = (index * 100) % 360;
                const radius = 80 + Math.sin(index * 0.5) * 20;
                const x = Math.cos(angle * Math.PI / 180) * radius + 150;
                const y = Math.sin(angle * Math.PI / 180) * radius + 125;
                
                aminoDiv.style.left = x + 'px';
                aminoDiv.style.top = y + 'px';
                aminoDiv.title = `${aa} (${index + 1})`;
                
                proteinView.appendChild(aminoDiv);
                
                // Add bonds between adjacent amino acids
                if (index > 0) {
                    const prevAngle = ((index - 1) * 100) % 360;
                    const prevRadius = 80 + Math.sin((index - 1) * 0.5) * 20;
                    const prevX = Math.cos(prevAngle * Math.PI / 180) * prevRadius + 150;
                    const prevY = Math.sin(prevAngle * Math.PI / 180) * prevRadius + 125;
                    
                    const bond = document.createElement('div');
                    bond.className = 'bond';
                    const length = Math.sqrt((x - prevX) ** 2 + (y - prevY) ** 2);
                    const bondAngle = Math.atan2(y - prevY, x - prevX) * 180 / Math.PI;
                    
                    bond.style.left = prevX + 'px';
                    bond.style.top = prevY + 'px';
                    bond.style.width = length + 'px';
                    bond.style.transform = `rotate(${bondAngle}deg)`;
                    
                    proteinView.appendChild(bond);
                }
            });
            
            // Update protein info
            proteinInfo.innerHTML = `Protein: ${aminoAcids.join('-')} (${aminoAcids.length} amino acids)`;
        }
        
        // Statistics Update
        function updateStats() {
            const efficiency = Math.max(0, 95 - mutationCount * 5);
            const offTargets = Math.floor(mutationCount * 0.3);
            const stability = Math.max(50, 100 - mutationCount * 2);
            
            const efficiencyEl = document.getElementById('cutEfficiency');
            const offTargetsEl = document.getElementById('offTargets');
            const mutationsEl = document.getElementById('mutations');
            const stabilityEl = document.getElementById('stability');
            
            if (efficiencyEl) {
                efficiencyEl.textContent = efficiency + '%';
                efficiencyEl.style.color = efficiency > 80 ? '#00ff88' : efficiency > 60 ? '#ffe66d' : '#ff6b6b';
            }
            
            if (offTargetsEl) {
                offTargetsEl.textContent = offTargets;
            }
            
            if (mutationsEl) {
                mutationsEl.textContent = mutationCount;
            }
            
            if (stabilityEl) {
                stabilityEl.textContent = stability + '%';
                stabilityEl.style.color = stability > 80 ? '#00ff88' : stability > 60 ? '#ffe66d' : '#ff6b6b';
            }
        }
        
        // Organism Selection with null safety
        function selectOrganism(organism) {
            currentOrganism = organism;
            
            // Clear all organism card selections
            document.querySelectorAll('.organism-card').forEach(card => {
                if (card) {
                    card.style.border = '1px solid #00ff88';
                    card.style.boxShadow = '';
                }
            });
            
            // Highlight selected organism
            const selectedCard = event?.target?.closest('.organism-card');
            if (selectedCard) {
                selectedCard.style.border = '2px solid #8a2be2';
                selectedCard.style.boxShadow = '0 0 15px rgba(138, 43, 226, 0.5)';
            }
            
            // Update organism-specific parameters
            const organismData = {
                bacteria: { growthRate: 'Fast', complexity: 'Low', editEfficiency: 95 },
                plant: { growthRate: 'Medium', complexity: 'Medium', editEfficiency: 80 },
                mouse: { growthRate: 'Slow', complexity: 'High', editEfficiency: 70 },
                human: { growthRate: 'Very Slow', complexity: 'Very High', editEfficiency: 60 }
            };
            
            const data = organismData[organism];
            if (data) {
                console.log(`Selected ${organism}: Growth=${data.growthRate}, Efficiency=${data.editEfficiency}%`);
            }
        }
        
        // Simulation Runner
        function runSimulation() {
            if (mutationCount === 0) {
                alert('Please make some genetic modifications first!');
                return;
            }
            
            // Simulate genetic modification effects
            const simulationResults = {
                bacteria: {
                    success: Math.random() > 0.2,
                    effects: ['Increased antibiotic resistance', 'Modified metabolic pathway', 'Enhanced protein production'],
                    time: '2-4 hours'
                },
                plant: {
                    success: Math.random() > 0.3,
                    effects: ['Improved drought tolerance', 'Enhanced nutrient uptake', 'Modified flowering time'],
                    time: '2-4 weeks'
                },
                mouse: {
                    success: Math.random() > 0.4,
                    effects: ['Altered disease susceptibility', 'Modified behavior', 'Changed physical traits'],
                    time: '6-12 months'
                },
                human: {
                    success: Math.random() > 0.5,
                    effects: ['Potential therapeutic benefit', 'Enhanced cellular function', 'Corrected genetic defect'],
                    time: '1-5 years'
                }
            };
            
            const result = simulationResults[currentOrganism];
            const successRate = Math.floor(Math.random() * 40) + 60;
            
            // Show simulation progress
            const modal = document.createElement('div');
            modal.className = 'modal';
            modal.style.display = 'block';
            modal.innerHTML = `
                <div class="modal-content">
                    <span class="close-modal" onclick="this.parentElement.parentElement.remove()">&times;</span>
                    <h2 style="color: #8a2be2; font-family: 'Orbitron', monospace;">🧬 Simulation Results</h2>
                    <div style="margin: 20px 0;">
                        <div style="color: ${result.success ? '#00ff88' : '#ff6b6b'}; font-size: 1.5rem; margin: 10px 0;">
                            ${result.success ? '✅ SUCCESS' : '❌ FAILED'}
                        </div>
                        <div style="color: #00ffff; margin: 15px 0;">
                            <strong>Organism:</strong> ${currentOrganism.charAt(0).toUpperCase() + currentOrganism.slice(1)}
                        </div>
                        <div style="color: #00ffff; margin: 15px 0;">
                            <strong>Success Rate:</strong> ${successRate}%
                        </div>
                        <div style="color: #00ffff; margin: 15px 0;">
                            <strong>Time to Results:</strong> ${result.time}
                        </div>
                        <div style="color: #00ff88; margin: 15px 0;">
                            <strong>Predicted Effects:</strong>
                            <ul style="margin: 10px 0; padding-left: 20px;">
                                ${result.effects.map(effect => `<li>${effect}</li>`).join('')}
                            </ul>
                        </div>
                        <div style="color: #ff0080; margin: 15px 0; font-style: italic;">
                            ${result.success ? 
                                'Congratulations! Your genetic modification was successful.' : 
                                'Modification failed. Consider optimizing your approach.'}
                        </div>
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            animateSoundIndicator();
            
            // Update leaderboard safely
            if (result.success) {
                const leaderboardScore = document.querySelector('.leaderboard-item:last-child .score');
                if (leaderboardScore) {
                    const currentScore = parseInt(leaderboardScore.textContent) || 0;
                    leaderboardScore.textContent = (currentScore + mutationCount * 10) + ' edits';
                }
            }
        }
        
        // Phylogenetic Tree Generator
        function generatePhylogeneticTree() {
            const tree = document.getElementById('phyloTree');
            if (!tree) return;
            
            const treeWidth = tree.clientWidth - 40;
            const treeHeight = 150;
            
            // Clear existing tree
            const existingElements = tree.querySelectorAll('.tree-node, .tree-branch');
            existingElements.forEach(el => el.remove());
            
            // Define species based on current mutations
            const species = [
                { name: 'Original', x: 50, y: 75, mutations: 0 },
                { name: 'Variant A', x: 200, y: 50, mutations: mutationCount },
                { name: 'Variant B', x: 200, y: 100, mutations: mutationCount + 2 },
                { name: 'Enhanced', x: 350, y: 75, mutations: mutationCount + 5 }
            ];
            
            // Draw branches
            const branches = [
                { from: 0, to: 1 }, { from: 0, to: 2 }, { from: 1, to: 3 }, { from: 2, to: 3 }
            ];
            
            branches.forEach(branch => {
                const from = species[branch.from];
                const to = species[branch.to];
                
                const branchEl = document.createElement('div');
                branchEl.className = 'tree-branch';
                const length = Math.sqrt((to.x - from.x) ** 2 + (to.y - from.y) ** 2);
                const angle = Math.atan2(to.y - from.y, to.x - from.x) * 180 / Math.PI;
                
                branchEl.style.left = from.x + 'px';
                branchEl.style.top = from.y + 'px';
                branchEl.style.width = length + 'px';
                branchEl.style.transform = `rotate(${angle}deg)`;
                
                tree.appendChild(branchEl);
            });
            
            // Draw nodes
            species.forEach((sp, index) => {
                const node = document.createElement('div');
                node.className = 'tree-node';
                node.style.left = sp.x + 'px';
                node.style.top = sp.y + 'px';
                node.title = `${sp.name} (${sp.mutations} mutations)`;
                
                // Color based on mutations
                const intensity = Math.min(sp.mutations / 10, 1);
                node.style.background = `hsl(${280 - intensity * 100}, 70%, ${50 + intensity * 30}%)`;
                
                tree.appendChild(node);
            });
        }
        
        // Initialize DNA particle background with error handling
        function createDNAParticles() {
            const background = document.getElementById('dnaBackground');
            if (!background) return;
            
            const particleCount = 50;
            
            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.className = 'dna-particle';
                particle.style.left = Math.random() * 100 + '%';
                particle.style.top = Math.random() * 100 + '%';
                particle.style.animationDelay = Math.random() * 8 + 's';
                particle.style.animationDuration = (8 + Math.random() * 4) + 's';
                background.appendChild(particle);
            }
        }
        
        // Safe sound indicator animation
        function animateSoundIndicator() {
            const indicator = document.getElementById('soundIndicator');
            if (!indicator) return;
            
            indicator.style.animation = 'none';
            setTimeout(() => {
                indicator.style.animation = 'sound-wave 0.5s 3';
            }, 10);
        }
        
        // Section modal content with null safety
        const sectionContent = {
            mutate: {
                title: '🧠 Mutate Your Mind',
                content: `
                    <h3>Neural Enhancement Protocols</h3>
                    <p>Welcome to the cognitive augmentation lab. Here you can:</p>
                    <div style="margin: 20px 0;">
                        <h4 style="color: #8a2be2;">Active Protocols:</h4>
                        <ul style="color: #00ff88; margin: 10px 0; padding-left: 20px;">
                            <li>Memory Enhancement Gene Therapy (MEGT-7)</li>
                            <li>Accelerated Learning Pathways (ALP-3)</li>
                            <li>Creative Thinking Amplifiers (CTA-12)</li>
                            <li>Problem-Solving Neural Networks (PSNN-9)</li>
                        </ul>
                    </div>
                    <div style="background: rgba(138, 43, 226, 0.1); padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <strong style="color: #ff0080;">What If Generator:</strong><br>
                        "What if humans could directly interface with quantum computers through modified neural tissue?"
                    </div>
                `
            },
            build: {
                title: '🧬 Build-A-Gene Laboratory',
                content: `
                    <h3>CRISPR Design Studio</h3>
                    <p>Create life from scratch using our advanced gene editing tools:</p>
                    <div style="margin: 20px 0;">
                        <h4 style="color: #8a2be2;">Available Tools:</h4>
                        <ul style="color: #00ff88; margin: 10px 0; padding-left: 20px;">
                            <li>Base Editor Pro - Precise single nucleotide changes</li>
                            <li>Prime Editor - Insert/delete sequences with accuracy</li>
                            <li>Cas9 Designer - Target specific genetic locations</li>
                            <li>Organism Simulator - Test your creations virtually</li>
                        </ul>
                    </div>
                    <div style="background: rgba(0, 255, 255, 0.1); padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <strong style="color: #00ffff;">Current Project:</strong><br>
                        Design a plant that can survive in methane-rich atmospheres for Mars colonization.
                    </div>
                `
            },
            vault: {
                title: '🔬 Alpha Vault of Species',
                content: `
                    <h3>Classified Genetic Archive</h3>
                    <p>Access to the most advanced genetic blueprints in the universe:</p>
                    <div style="margin: 20px 0;">
                        <h4 style="color: #8a2be2;">Recent Discoveries:</h4>
                        <ul style="color: #00ff88; margin: 10px 0; padding-left: 20px;">
                            <li>Tardigrade Resilience Gene (TRG-∞)</li>
                            <li>Bioluminescent Communication Arrays (BCA-7)</li>
                            <li>Photosynthetic Enhancement Protocols (PEP-4)</li>
                            <li>Extremophile Adaptation Sequences (EAS-∞)</li>
                            <li>[CLASSIFIED] Shapeshifter DNA Matrix</li>
                        </ul>
                    </div>
                    <div style="background: rgba(0, 255, 136, 0.1); padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <strong style="color: #00ff88;">Upload Portal:</strong><br>
                        Share your genetic discoveries with the community. Every upload earns Gene Points!
                        <button style="margin-top: 10px; background: linear-gradient(45deg, #8a2be2, #00ffff); border: none; color: #000; padding: 8px 15px; border-radius: 15px; cursor: pointer;" onclick="alert('Upload feature activated! 🧬')">Upload Discovery</button>
                    </div>
                `
            },
            protocols: {
                title: '⚡ Rebel Protocols Division',
                content: `
                    <h3>Underground Gene-Hacking Network</h3>
                    <p>Join the resistance against biological limitations:</p>
                    <div style="margin: 20px 0;">
                        <h4 style="color: #8a2be2;">Active Missions:</h4>
                        <ul style="color: #00ff88; margin: 10px 0; padding-left: 20px;">
                            <li>Operation LAZARUS - Reverse aging protocols</li>
                            <li>Project GAIA - Environmental adaptation enhancement</li>
                            <li>Mission PHOENIX - Regenerative tissue engineering</li>
                            <li>Protocol ATLAS - Superhuman strength modifications</li>
                            <li>[TOP SECRET] Operation PROMETHEUS</li>
                        </ul>
                    </div>
                    <div style="background: rgba(255, 0, 128, 0.1); padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <strong style="color: #ff0080;">Rebel Motto:</strong><br>
                        "Evolution doesn't wait for permission. Neither do we."
                    </div>
                    <div style="background: rgba(138, 43, 226, 0.1); padding: 15px; border-radius: 10px; margin: 20px 0;">
                        <strong style="color: #8a2be2;">What If Challenge:</strong><br>
                        "What if we could edit genes in real-time using thought-controlled nanobots?"
                    </div>
                `
            }
        };
        
        // Open section modal with safety
        function openSection(sectionId) {
            const modal = document.getElementById('sectionModal');
            const content = document.getElementById('sectionContent');
            
            if (!modal || !content || !sectionContent[sectionId]) return;
            
            content.innerHTML = sectionContent[sectionId].content;
            modal.style.display = 'block';
            
            if (typeof animateSoundIndicator === 'function') {
                animateSoundIndicator();
            }
        }
        
        // Open AI guide with safety
        function openGuide() {
            const modal = document.getElementById('guideModal');
            if (!modal) return;
            
            modal.style.display = 'block';
            
            if (typeof animateSoundIndicator === 'function') {
                animateSoundIndicator();
            }
        }
        
        // Close modal with safety
        function closeModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // Close modal on outside click with safety
        window.onclick = function(event) {
            const modals = document.querySelectorAll('.modal');
            if (modals && modals.length > 0) {
                modals.forEach(modal => {
                    if (modal && event.target === modal) {
                        modal.style.display = 'none';
                    }
                });
            }
        }
        
        // Enhanced initialization
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize default tool
            selectTool('cas9');
            
            // Set up initial protein visualization
            setTimeout(() => {
                updateProteinVisualization();
            }, 500);
            
            // Generate initial phylogenetic tree
            setTimeout(generatePhylogeneticTree, 1000);
            
            // Add real-time sequence validation
            const guideRNAInput = document.getElementById('guideRNA');
            if (guideRNAInput) {
                guideRNAInput.addEventListener('input', function(e) {
                    const sequence = e.target.value.toUpperCase();
                    const validBases = /^[ATGC]*$/;
                    
                    if (!validBases.test(sequence)) {
                        e.target.style.borderColor = '#ff4444';
                    } else {
                        e.target.style.borderColor = '#8a2be2';
                    }
                    
                    if (sequence.length === 20) {
                        e.target.style.borderColor = '#00ff88';
                        e.target.style.boxShadow = '0 0 10px rgba(0, 255, 136, 0.3)';
                    }
                });
            }
            
            // Add keyboard shortcuts for tools
            document.addEventListener('keydown', (e) => {
                if (e.altKey) {
                    switch(e.key) {
                        case '1': selectTool('cas9'); break;
                        case '2': selectTool('base'); break;
                        case '3': selectTool('prime'); break;
                        case '4': selectTool('cut'); break;
                        case '5': selectTool('analyze'); break;
                        case '6': selectTool('simulate'); break;
                    }
                }
            });
            
            // Regenerate tree when mutations change
            setInterval(() => {
                if (mutationCount > 0) {
                    generatePhylogeneticTree();
                }
            }, 5000);
            
            // Initialize stats
            updateStats();
            
            // Safely create DNA particles
            if (typeof createDNAParticles === 'function') {
                createDNAParticles();
            }
            
            // Add random glitch effects with null checks
            setInterval(() => {
                const elements = document.querySelectorAll('.hero-title, .logo, .section-title');
                if (elements && elements.length > 0) {
                    const randomElement = elements[Math.floor(Math.random() * elements.length)];
                    if (randomElement) {
                        randomElement.style.textShadow = `0 0 20px hsl(${Math.random() * 360}, 100%, 50%)`;
                        setTimeout(() => {
                            randomElement.style.textShadow = '';
                        }, 200);
                    }
                }
            }, 3000);
            
            // Animate leaderboard periodically with safety
            setInterval(() => {
                const items = document.querySelectorAll('.leaderboard-item');
                if (items && items.length > 0) {
                    items.forEach((item, index) => {
                        if (item) {
                            setTimeout(() => {
                                item.style.transform = 'translateX(5px) scale(1.02)';
                                setTimeout(() => {
                                    item.style.transform = '';
                                }, 300);
                            }, index * 100);
                        }
                    });
                }
            }, 8000);
            
            // Add particle trails to mouse movement with safety
            let mouseTrails = [];
            document.addEventListener('mousemove', (e) => {
                const trail = document.createElement('div');
                trail.style.position = 'fixed';
                trail.style.left = e.clientX + 'px';
                trail.style.top = e.clientY + 'px';
                trail.style.width = '3px';
                trail.style.height = '3px';
                trail.style.background = `linear-gradient(45deg, #8a2be2, #00ffff)`;
                trail.style.borderRadius = '50%';
                trail.style.pointerEvents = 'none';
                trail.style.zIndex = '999';
                trail.style.animation = 'fade-out 1s forwards';
                document.body.appendChild(trail);
                
                mouseTrails.push(trail);
                if (mouseTrails.length > 20) {
                    const oldTrail = mouseTrails.shift();
                    if (oldTrail && oldTrail.parentNode) {
                        oldTrail.parentNode.removeChild(oldTrail);
                    }
                }
            });
        });
        
        // Add keyboard shortcuts for power users
        document.addEventListener('keydown', (e) => {
            if (e.ctrlKey && e.shiftKey) {
                switch(e.key) {
                    case 'M':
                        openSection('mutate');
                        break;
                    case 'B':
                        openSection('build');
                        break;
                    case 'V':
                        openSection('vault');
                        break;
                    case 'P':
                        openSection('protocols');
                        break;
                    case 'H':
                        openGuide();
                        break;
                }
            }
        });
        
        // Add konami code easter egg
        let konamiCode = [];
        const konamiSequence = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65]; // ↑↑↓↓←→←→BA
        
        document.addEventListener('keydown', (e) => {
            konamiCode.push(e.keyCode);
            if (konamiCode.length > konamiSequence.length) {
                konamiCode.shift();
            }
            
            if (konamiCode.length === konamiSequence.length && 
                konamiCode.every((key, index) => key === konamiSequence[index])) {
                // Konami code activated!
                document.body.style.animation = 'rainbow-shift 0.5s infinite';
                setTimeout(() => {
                    document.body.style.animation = '';
                    alert('🎉 KONAMI CODE ACTIVATED! 🎉\n\nYou\'ve unlocked GODMODE!\n\nAll genetic sequences are now under your control!\n\n"The future belongs to those who understand the language of life." - Dr. Helix, 2055');
                }, 2000);
            }
        });
    </script>
</body>
</html>Codon(this)" data-position="0">ATG</span>
                        <span class="codon" onclick="selectCodon(this)" data-position="1">CAT</span>
                        <span class="codon" onclick="selectCodon(this)" data-position="2">GGC</span>
                        <span class="codon" onclick="selectCodon(this)" data-position="3">TAA</span>
                        <span class="codon" onclick="selectCodon(this)" data-position="4">CCG</span>
                        <span class="codon" onclick="selectCodon(this)" data-position="5">ATT</span>
                        <span class="codon" onclick="selectCodon(this)" data-position="6">CGA</span>
                        <span class="codon" onclick="selectCodon(this)" data-position="7">TGC</span>
                        <span class="codon" onclick="select